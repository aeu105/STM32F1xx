#include "bsp_music.h"


unsigned int tone[] = {523, 587, 659, 698, 784, 880, 988};

unsigned int star[] = {
	523, 523, 784, 784, 880, 880, 784,
	698, 698, 659, 659, 587, 587, 523,
	784, 784, 698, 698, 659, 659, 587,
	784, 784, 698, 698, 659, 659, 587,
	523, 523, 784, 784, 880, 880, 784,
	698, 698, 659, 659, 587, 587, 523,
};

// 频率 节拍
unsigned int little_star[][2] = {
	{523,800000},{523,800000},{784,800000},{784,800000},{880,800000},{880,800000},{784,1600000},
	{698,800000},{698,800000},{659,800000},{659,800000},{587,800000},{587,800000},{523,1600000},
	{784,800000},{784,800000},{698,800000},{698,800000},{659,800000},{659,800000},{587,1600000},
	{784,800000},{784,800000},{698,800000},{698,800000},{659,800000},{659,800000},{587,1600000},
	{523,800000},{523,800000},{784,800000},{784,800000},{880,800000},{880,800000},{784,1600000},
	{698,800000},{698,800000},{659,800000},{659,800000},{587,800000},{587,800000},{523,1600000},
	{0, 0}
};

void Display_Sound(unsigned int fre) {
	
	unsigned int TIM_Period;
	
	TIM_Period = (1000000 / fre);
	// 寄存器修改装载值, 比较值
	// 即      计数值, 电平翻转值
	TIM4->ARR = TIM_Period;
	// 设置 50% 占空比
	TIM4->CCR3 = TIM_Period / 2;
}
